<% include ../layout/head %>
<div class="mb-3 card">
    <div class="card-header">
        <h4 class="card-title">
            <a href="/pendataan-warga/anggota-keluarga/<%=param.id%>" class="btn btn-sm btn-outline-primary rounded-circle"><i class="mif-arrow-left"></i></a>
            <span class="d-inline-block align-middle">
                <%=title%>
            </span>
        </h4>
    </div>
    <div class="card-body">
        <%if(locals.success){%>
            <div class="alert alert-success">
                <%=locals.success.msg%>
            </div>
        <%}%>
        <form action="" method="post" autocomplete="off">
            <div class="form-row">
                <div class="col-form-label col-xl-2 col-md-3 text-md-right">
                    <label>NIK</label>
                </div>
                <div class="col-xl-4 mb-3 col-md-3">
                    <input type="text" class="shadow-none form-control<%=locals.field_error.nomor_nik?' is-invalid':null%>" maxlength="16" placeholder="Nomor Induk Kependudukan" name="nomor_nik" value="<%=locals.input.nomor_nik%>"/>
                    <% if (locals.field_error.nomor_nik) { %>
                        <small class="text-danger"><%=locals.field_error.nomor_nik.msg%></small>
                    <% } %>
                </div>
                <div class="col-form-label col-xl-2 col-md-3 text-md-right">
                    <label>Status Keluarga</label>
                </div>
                <div class="col-xl-4 mb-3 col-md-3">
                    <select name="status_keluarga" class="form-control<%=locals.field_error.status_keluarga?' is-invalid':null%>">
                        <option value="kepala_keluarga"<%=input.status_keluarga == 'kepala_keluarga'?' selected':''%>>Kepala Keluarga</option>
                        <option value="istri"<%=input.status_keluarga == 'istri'?' selected':''%>>Istri</option>
                        <option value="anak"<%=input.status_keluarga == 'anak'?' selected':''%>>Anak</option>
                    </select>
                    <% if (locals.field_error.status_keluarga) { %>
                        <small class="text-danger"><%=locals.field_error.status_keluarga.msg%></small>
                    <% } %>
                </div>
            </div>
            
            <div class="form-row mb-3">
                <div class="col-form-label col-xl-2 col-md-3 text-md-right">
                    <label>Nama Lengkap</label>
                </div>
                <div class="col-xl-10 col-md-9">
                    <input type="text" class="shadow-none form-control<%=locals.field_error.nama_lengkap?' is-invalid':null%>" maxlength="30" placeholder="Nama Lengkap" name="nama_lengkap" value="<%=input.nama_lengkap%>" id="nama"/>
                    <% if (locals.field_error.nama_lengkap) { %>
                        <small class="text-danger"><%=locals.field_error.nama_lengkap.msg%></small>
                    <% } %>
                </div>
            </div>
            <div class="form-row">
                <div class="col-form-label col-xl-2 col-md-3 text-md-right">
                    <label>Jenis Kelamin</label>
                </div>
                <div class="col-xl-4 mb-3 col-md-3 col-form-label">
                    <div class="form-check-inline"><label class="form-check-label"><input type="radio" class="form-check-input" name="jenis_kelamin" value="L"<%=input.jenis_kelamin != 'P'?' checked':null%>> Laki-laki</label></div>
                    <div class="form-check-inline"><label class="form-check-label"><input type="radio" class="form-check-input" name="jenis_kelamin" value="P"<%=input.jenis_kelamin == 'P'?' checked':null%>> Perempuan</label></div><br>
                    <% if (locals.field_error.jenis_kelamin) { %>
                        <small class="text-danger"><%=locals.field_error.jenis_kelamin.msg%></small>
                    <% } %>
                </div>
                <div class="col-form-label col-xl-2 col-md-3 text-md-right">
                    <label>Agama</label>
                </div>
                <div class="col-xl-4 mb-3 col-md-3">
                    <select name="agama" class="form-control<%=locals.field_error.agama?' is-invalid':null%>">
                        <option value="1"<%=input.agama == '1'?' selected':null%>>Islam</option>
                        <option value="2"<%=input.agama == '2'?' selected':null%>>Kristen</option>
                        <option value="3"<%=input.agama == '3'?' selected':null%>>Katolik</option>
                        <option value="4"<%=input.agama == '4'?' selected':null%>>Hindu</option>
                        <option value="5"<%=input.agama == '5'?' selected':null%>>Buddha</option>
                        <option value="6"<%=input.agama == '6'?' selected':null%>>Kong Hu Cu</option>
                    </select>
                    <% if (locals.field_error.agama) { %>
                        <small class="text-danger"><%=locals.field_error.agama.msg%></small>
                    <% } %>
                </div>
            </div>
            <div class="form-row mb-3">
                <div class="col-form-label col-xl-2 col-md-3 text-md-right">
                    <label>Tempat Lahir</label>
                </div>
                <div class="col-xl-10 col-md-9">
                    <input type="text" class="shadow-none form-control<%=locals.field_error.tempat_lahir?' is-invalid':null%>" maxlength="20" placeholder="Tempat Lahir (Kota Kelahiran)" name="tempat_lahir" value="<%=input.tempat_lahir%>"/>
                    <% if (locals.field_error.tempat_lahir) { %>
                        <small class="text-danger"><%=locals.field_error.tempat_lahir.msg%></small>
                    <% } %>
                </div>
            </div>
            <div class="form-row mb-3">
                <div class="col-form-label col-xl-2 col-md-3 text-md-right">
                    <label>Tanggal Lahir</label>
                </div>
                <div class="col-xl-10 col-md-9 form-row">
                    <div class="col-3">
                        <input type="number" min="1" max="31" class="shadow-none form-control<%=locals.field_error.tanggal_lahir?' is-invalid':null%>" placeholder="Tanggal" name="tanggal_lahir" value="<%=Array.isArray(input.tanggal_lahir)?input.tanggal_lahir[0]:''%>" id="tanggal"/>
                    </div>
                    <div class="col-5">
                        <% var nama_bulan = ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember']; %>
                        <select name="tanggal_lahir" class="form-control<%=locals.field_error.tanggal_lahir?' is-invalid':null%>" id="bulan">
                        <% for (var i = 0; i < 12 ; i++) { %>
                        <% if (Array.isArray(input.tanggal_lahir)) {%>
                            <% if (input.tanggal_lahir[1] == (i+1)) { %>
                            <option value="<%=(i+1)%>" selected><%=nama_bulan[i]%></option>
                            <% } else { %>
                            <option value="<%=(i+1)%>"><%=nama_bulan[i]%></option>
                            <% } %>
                        <% } else { %>
                            <option value="<%=(i+1)%>"><%=nama_bulan[i]%></option>
                        <% } %>
                        <% } %>
                        </select>
                    </div>
                    <div class="col-4">
                        <input type="number" class="shadow-none form-control<%=locals.field_error.tanggal_lahir?' is-invalid':null%>" max="<%=new Date().getFullYear()%>" min="<%=(new Date().getFullYear()-90)%>" placeholder="Tahun" name="tanggal_lahir" value="<%=Array.isArray(input.tanggal_lahir)?input.tanggal_lahir[2]:''%>" id="tahun"/>
                    </div>
                    <% if (locals.field_error.tanggal_lahir) { %>
                        <small class="text-danger"><%=locals.field_error.tanggal_lahir.msg%></small>
                    <% } %>
                </div>
            </div>
            <div class="form-row">
                <div class="col-form-label col-xl-2 col-md-3 text-md-right">
                    <label>Pendidikan Terakhir</label>
                </div>
                <div class="col-xl-4 mb-3 col-md-3">
                    <% var pendidikan = ['Tidak / Belum Sekolah','Belum Tamat SD / Sederajat','Tamat SD / Sederajat','SLTP / Sederajat', 'SLTA / Sederajat', 'Diploma I / II', 'Akademi / Diploma III / Sarjana Muda','Diploma IV / Strata I', 'Strata II', 'Strata III'] %>
                    <select name="pendidikan" class="form-control<%=locals.field_error.pendidikan?' is-invalid':null%>">
                    <% for (var i in pendidikan) { %>
                        <option value="<%=parseInt(i)+1%>"<%=(input.pendidikan == (parseInt(i)+1)? ' selected' : null)%>><%=pendidikan[i]%></option>
                    <% } %>
                    </select>
                    <% if (locals.field_error.pendidikan) { %>
                        <small class="text-danger"><%=locals.field_error.pendidikan.msg%></small>
                    <% } %>
                </div>
                <div class="col-form-label col-xl-2 col-md-3 text-md-right">
                    <label>Status Perkawinan</label>
                </div>
                <div class="col-xl-4 mb-3 col-md-3">
                    <select name="status_perkawinan" class="form-control<%=locals.field_error.status_perkawinan?' is-invalid':null%>">
                        <option value="1"<%=input.status_perkawinan == '1'? ' selected' : null%>>Belum Kawin</option>
                        <option value="2"<%=input.status_perkawinan == '2'? ' selected' : null%>>Kawin</option>
                        <option value="3"<%=input.status_perkawinan == '3'? ' selected' : null%>>Cerai Hidup</option>
                        <option value="4"<%=input.status_perkawinan == '4'? ' selected' : null%>>Cerai Mati</option>
                    </select>
                    <% if (locals.field_error.status_perkawinan) { %>
                        <small class="text-danger"><%=locals.field_error.status_perkawinan.msg%></small>
                    <% } %>
                </div>
            </div>
            
            <div class="form-row mb-3 align-middle">
                <div class="offset-xl-2 offset-lg-3 offset-md-4 col-lg-9 col-md-8 col-xl-10">
                    <button type="submit" class="btn btn-primary">
                        <i class="mif-paper-plane"></i>
                        <span>
                            Simpan
                        </span>
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
<% include ../layout/foot %>